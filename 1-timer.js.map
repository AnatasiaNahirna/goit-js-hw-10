{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst input = document.querySelector(\".datetime-picker\");\nconst btn = document.querySelector(\".button\")\nconst timerVisual = document.querySelectorAll(\".value\")\n\nlet userSelectedDate;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        console.log(selectedDates[0])\n        userSelectedDate = selectedDates[0];\n        if (userSelectedDate < Date.now()) {\n            iziToast.show({\n                title: \"\",\n                message: \"Please choose a date in the future\",\n            });\n            btn.classList.remove(\"btn-enabled\");\n            btn.setAttribute(\"disabled\",\"true\");\n        } else {\n            btn.classList.add(\"btn-enabled\")\n            btn.removeAttribute(\"disabled\")\n        }\n    },\n  };\n  \nflatpickr(input, options);\n\nbtn.addEventListener(\"click\",timerStart)\n\nfunction timerStart(event) {\n    btn.classList.remove(\"btn-enabled\");\n    btn.setAttribute(\"disabled\",\"true\");\n    input.classList.add(\"input-disabled\");\n    input.setAttribute(\"disabled\", \"true\");\n    \n    let userSelectedDateConverted;\n    const interval = setInterval(() => {\n        userSelectedDateConverted = convertMs(userSelectedDate - Date.now());\n        timerVisual[0].textContent = addLeadingZero(userSelectedDateConverted.days);\n        timerVisual[1].textContent = addLeadingZero(userSelectedDateConverted.hours);\n        timerVisual[2].textContent = addLeadingZero(userSelectedDateConverted.minutes);\n        timerVisual[3].textContent = addLeadingZero(userSelectedDateConverted.seconds);\n\n        if (isTimeUp(userSelectedDateConverted)) {\n            for (const el of timerVisual) {\n                el.textContent = \"00\";\n            };\n            input.removeAttribute(\"disabled\");\n            clearInterval(interval);\n        };\n    }, 1000);\n      \n};\n\nfunction isTimeUp(value) {\n    return value.days === 0 && value.hours === 0 && value.minutes === 0 && value.seconds === 0;\n};\n\nfunction addLeadingZero(value) {\n    return String(value).padStart(2, \"0\");\n};\n\nfunction convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n};"],"names":["input","btn","timerVisual","userSelectedDate","options","selectedDates","iziToast","flatpickr","timerStart","event","userSelectedDateConverted","interval","convertMs","addLeadingZero","isTimeUp","el","value","ms","days","hours","minutes","seconds"],"mappings":"iyBAMA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAM,SAAS,cAAc,SAAS,EACtCC,EAAc,SAAS,iBAAiB,QAAQ,EAEtD,IAAIC,EAEJ,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAC5BF,EAAmBE,EAAc,CAAC,EAC9BF,EAAmB,KAAK,OACxBG,EAAS,KAAK,CACV,MAAO,GACP,QAAS,oCACzB,CAAa,EACDL,EAAI,UAAU,OAAO,aAAa,EAClCA,EAAI,aAAa,WAAW,MAAM,IAElCA,EAAI,UAAU,IAAI,aAAa,EAC/BA,EAAI,gBAAgB,UAAU,EAErC,CACL,EAEAM,EAAUP,EAAOI,CAAO,EAExBH,EAAI,iBAAiB,QAAQO,CAAU,EAEvC,SAASA,EAAWC,EAAO,CACvBR,EAAI,UAAU,OAAO,aAAa,EAClCA,EAAI,aAAa,WAAW,MAAM,EAClCD,EAAM,UAAU,IAAI,gBAAgB,EACpCA,EAAM,aAAa,WAAY,MAAM,EAErC,IAAIU,EACJ,MAAMC,EAAW,YAAY,IAAM,CAO/B,GANAD,EAA4BE,EAAUT,EAAmB,KAAK,IAAK,CAAA,EACnED,EAAY,CAAC,EAAE,YAAcW,EAAeH,EAA0B,IAAI,EAC1ER,EAAY,CAAC,EAAE,YAAcW,EAAeH,EAA0B,KAAK,EAC3ER,EAAY,CAAC,EAAE,YAAcW,EAAeH,EAA0B,OAAO,EAC7ER,EAAY,CAAC,EAAE,YAAcW,EAAeH,EAA0B,OAAO,EAEzEI,EAASJ,CAAyB,EAAG,CACrC,UAAWK,KAAMb,EACba,EAAG,YAAc,KAErBf,EAAM,gBAAgB,UAAU,EAChC,cAAcW,CAAQ,CAClC,CACK,EAAE,GAAI,CAEX,CAEA,SAASG,EAASE,EAAO,CACrB,OAAOA,EAAM,OAAS,GAAKA,EAAM,QAAU,GAAKA,EAAM,UAAY,GAAKA,EAAM,UAAY,CAC7F,CAEA,SAASH,EAAeG,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASJ,EAAUK,EAAI,CAMnB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C"}